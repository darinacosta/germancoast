<!DOCTYPE html>
<html>
<head>
  <title>The German Coast</title>
  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" media="screen">
  <link rel="stylesheet" href="http://leafletjs.com/dist/leaflet.css" />
  <link rel="stylesheet" href="../css/style.css" />
  <link rel="stylesheet" href="./plugins/minimap/Control.MiniMap.css">

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <style>
    .esri-leaflet-logo{
      display:none;
    }

    body {
            padding: 0;
            margin: 0;
        }

    html, body, #map {
        height: 100%;
        width: 100%;
    }

    .leaflet-control-zoom{
        display:none;
      }

    .map-tab-content{
      position:absolute;
      top:0;
      left:0;
      max-height:100%;
      height:100%;
      overflow:scroll;
      overflow-x:hidden;
      padding:55px 15px 15px 15px;
      background: rgba(36, 44, 36,.60);
      color: #fff;
      text-shadow: 0 0 1px rgba(0,0,0,.8), 0 0 1px rgba(0,0,0,.8);
    }

    .leaflet-control-minimap {
      border: 2px solid rgb(36, 44, 36);
    }

    .leaflet-control-minimap a {
      background-color: rgba(36, 44, 36, 1.0);
    }

    .main-menu{
      z-index:9999;
    }

   @media all and (max-width: 760px) { 
     #map{
      height:300px;
     }

     .map-tab-content{
      position:relative;
      padding:15px 15px 15px 15px;
      left:0px;
      top:0px;
      max-width:100%;
     }

     .leaflet-top .leaflet-control {
        margin-top: 80px;
      }
    }

  }
  </style>
</head>
<body>
  <div class="noscriptmsg">
    It seems your browser does not have Javascript enabled. To view the German Coast, please enable Javascript and <a href="http://germancoast.verylongroad.com">try again</a>.
    </div>

  <div id="map"></div>


<ul class="nav nav-tabs main-menu hidden-xs main-menu" id="tabset" style="position:absolute;top: 0px;width: 100%;">
        <li class="active"><a href="#homePane" class="home-location-button newpage" data-toggle="tab"><span class="glyphicon glyphicon-home"></span></a></li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">SWAMP & SUBURB <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li data-toggle="popover"
            data-content="The cypress swamps and marsh prairies of the LaBranche Wetlands have so far survived the real-estate ventures that have consumed neighboring ecosystems."><a href="#labranchePane" data-toggle="tab" class="labranche-location-button newpage">Speculation</a></li>
            <li data-toggle="popover" data-content="A story about a hurricane told through dynamic map events, animation, and film. Featuring an interview with long-time St. Charles Parish resident Donald Tregre, as well as footage from Hurricane Isaac."><a href="#hurricanePane" data-toggle="tab" class="hurricane newpage"><span>Hurricane</span></a></li>
            <li data-toggle="popover" data-content=""><a class="hurricane newpage inactive"><span>Crash</span></a></li>
          </ul><!-- end of dropdown menu -->
        </li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">INDUSTRY & DISASTER <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#norcoLandusePane" data-toggle="tab" class="norco-location-button newpage">Growth</a></li>
          <li data-toggle="popover"
          data-content="An exploration of the Shell Oil Refinery explosion of 1988 featuring contemporary news footage and interviews with local residents."><a class="video-link newpage inactive">Explosion <span class="glyphicon glyphicon-film"></span></a></li>
          </ul><!-- end of dropdown menu -->
        </li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">SLAVERY & REVOLT <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a class="inactive"><i>1811</i></a></li>
            <li><a class="inactive"><i>Maroon</i></a></li>
          </ul><!-- end of dropdown menu -->
        </li>
      </ul>

      <!--MOBILE NAV-->
     
      <ul class="nav nav-tabs hidden-xl hidden-lg hidden-md hidden-sm main-menu" id="tabset" style="position: absolute;top: 0px;width: 100%;">
        <li class="active home-location-button newpage"><a href="#homePane" class="home-location-button newpage" data-toggle="tab">The German Coast</span></a></li>
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">Module <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li data-toggle="popover"
            data-content="The cypress swamps and marsh prairies of the LaBranche Wetlands have so far survived the real-estate ventures that have consumed neighboring ecosystems."><a href="#labranchePane" data-toggle="tab" class="labranche-location-button newpage">Speculation</a></li>
            <li data-toggle="popover" data-content="A story about a hurricane told through dynamic map events, animation, and film. Featuring an interview with long-time St. Charles Parish resident Donald Tregre, as well as footage from Hurricane Isaac."><a href="#hurricanePane" data-toggle="tab" class="hurricane newpage"><span>Hurricane</span></a></li>
            <li data-toggle="popover" data-content=""><a class="hurricane newpage inactive"><span>Crash</span></a></li>
            <li><a href="#norcoLandusePane" data-toggle="tab" class="norco-location-button newpage">Growth</a></li>
            <li data-toggle="popover"
            data-content="An exploration of the Shell Oil Refinery explosion of 1988 featuring contemporary news footage and interviews with local residents."><a class="video-link newpage inactive">Explosion <span class="glyphicon glyphicon-film"></span></a></li>
            <li><a class="inactive"><i>1811</i></a></li>
            <li><a class="inactive"><i>Maroon</i></a></li>
          </ul><!-- end of dropdown menu -->
        </li>
      </ul>

       <!--/MOBILE NAV-->

<div class="tab-content map-tab-content col-md-4 col-sm-5">


        <!--*******************************************-->
        <!--********************HOME*******************-->
        <!--*******************************************-->

  <div id="homePane" class="tab-pane active">
      <h1>Louisiana's German Coast</h1>
      The southwestern rim of Lake Pontchartrain is a complex mosaic of denuded swamplands, oil infrastructure, and highway sprawl. 
      This page hosts a series of interrelated multi-media vignettes that provide a tour of the region and emphasize its unique 
      geographic features. Please begin by observing a few of the broader characteristics of the River Parish landscape: 
      the <a class="geometry-link" id="parishline-geofeature-event"><span class="glyphicon glyphicon-map-marker"></span>stark divide between swamp and suburb</a> along the St. Charles/Jefferson parish line;
      <a class="geometry-link" id="erosion-geofeature-event"><span class="glyphicon glyphicon-map-marker"></span>saltwater erosion</a> along the shores of the lake; 
      <a id="ej-geofeature-event" class="geometry-link"><span class="glyphicon glyphicon-map-marker"></span>residential areas sandwiched between refineries</a>; others that extend
      into <a class="geometry-link" id="suburb-geofeature-event"><span class="glyphicon glyphicon-map-marker"></span>precarious floodplains</a>;
      and the telltale <a class="geometry-link" id="radial-geofeature-event"><span class="glyphicon glyphicon-map-marker"></span>radial canals</a> of cypress logging.
    </div>

    <!--*******************************************-->
    <!--***************LABRANCHE*******************-->
    <!--*******************************************-->

    <div id="labranchePane" class="tab-pane">


      <div id="labranche-context">
        <h2>Real Estate Speculation in the LaBranche Wetlands</h2>
        <i> Click a development for additional context</i>  

      </div>
    </div>

    <!--*******************************************-->
    <!--***************HURRICANE*******************-->
    <!--*******************************************-->

    <div id="hurricanePane" class="tab-pane">
      <div id="hurricane-video-wrapper">
        <div id="hurricane-video-inner-wrapper">
          <video controls id="hurricane-video" style="max-width:650px;width:100%;" preload="auto">
            <source src="https://archive.org/download/donald_date_removed/donald_interview_05REMOVE_v1.pds.ogv" type="video/ogg">
            <source src="http://verylongroad.com/media/v/donald_interview_v1.pds.webmsd.webm" type="video/webm">
            <!--http://verylongroad.com/media/v/Interview_with_Donald_Treger_2013.ogv-->
            <source src="https://archive.org/download/westindianhurricane/Interview_with_Donald_Treger_2013mp4.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
        <div id="hurricane-video-control">
          <div style="float: left;">
            <span id="hurricane-play"><span class="glyphicon glyphicon-play pointer"></span></span> 
            <span id="hurricane-replay" class="glyphicon glyphicon-repeat pointer"></span></div>  <div style="float: right;">
            <input type="range" id="hurricane-volume-bar" min="0" max="1" step="0.1" value="1" style="float: right;">
          </div>
        </div>

        <div class="col-md-12" id="viewport-too-small">
          Some of this module's features have been disabled due to your screen size. For complete functionality, visit the German Coast in a larger viewport.
        </div>
      </div>
    </div>

  <!--*******************************************-->
  <!--*****************NORCO*********************-->
  <!--*******************************************-->

  <div id="norcoLandusePane" class="tab-pane">
    <div class="col-md-12" style="text-align:center;">
        <h3 style="display:inline-block">From Plantation to Refinery</h3> <a class="image-link" href="./i/plantation_toc_v1.jpg"><img title="Map Legend" description="Map Legend" src="./i/legend.png"></a>
        <div style="padding: 15px 0;">
          <input type="range" id="opacity-bar" min="0" max="1" step="0.1" value="1" style="max-width:375px;width:100%;margin:0 auto;cursor:pointer;">
        </div>
        <hr>
      </div>
      <p>As petroleum companies moved into Louisiana, they sought land that was plentiful and cheap in order to construct refineries. The "River Parishes" between Baton Rouge and New Orleans along the Mississippi River proved an ideal location. It hosted vast acres of idle land, a legacy of Louisiana's once-robust plantation economy. The river itself provided access to Gulf oil fields. It could also serve as a coolant for machinery, and a toxic waste sink.</p>
      <p>Many former slaves settled the plantation land upon which they once labored following the Civil War, often occupying towns and villages directly along the riverfront. When the lower Mississippi became a site of rapid petro-industrial development, these freed slave communities became the unwitting neighbors of heavy industry.
      <!--a id="landuse-switch-test">LAND USE SWITCH TEST</a><br-->
    </div>
  </div>





  </div><!-- /.tab-content -->
</div><!-- /.tabbable -->

  <script src="http://leafletjs.com/dist/leaflet.js"></script>

 <!--LEAFLET-->
  <script src="http://cdn-geoweb.s3.amazonaws.com/esri-leaflet/1.0.0-rc.3/esri-leaflet.js"></script>
  <script src="http://cdn-geoweb.s3.amazonaws.com/esri-leaflet/1.0.0-rc.3/esri-leaflet.js"></script>
  <script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>
  <script src="./plugins/minimap/Control.MiniMap.js" type="text/javascript"></script>



  <script>

    var map = L.map('map').setView([30.0339, -90.4008],11);

    L.esri.basemapLayer("Imagery",{attribution:'Basemap: ESRI'}).addTo(map);

    var miniMapLayer = new L.esri.basemapLayer("Imagery",{attribution:'Basemap: ESRI'});
    var miniMap = new L.Control.MiniMap(miniMapLayer, {
      toggleDisplay: true,
      position: 'bottomright'
    }).addTo(map);


    /********LAYERS******/
    var labrancheDevelopments = omnivore.kml('./layers/labranche_service_v7.kml')
    labrancheDevelopments.on('ready', function() {
        this.setStyle({color: "#960000",
          fillColor: "#642800",
          fillOpacity: 0.4,
          weight: 1});
    });

    var plantationsUrl = 'http://verylongroad.com/gis/services/plantation_test_v1.jpg',
    plantationBounds = [[29.70323, -91.45075,29.70323], [30.46062, -89.96876]];

    var plantationsLayer = L.imageOverlay(plantationsUrl, plantationBounds,{
      opacity: 1
    });


  $( "#homePane" ).on( "click", "a[class='geometry-link']", function( event ) {
      switch(event.target.id){
        case 'radial-geofeature-event':
          map.setView(new L.LatLng(30.269, -90.377), 15);
          break;
        case 'erosion-geofeature-event':
          map.setView(new L.LatLng(30.046, -90.330), 14);
          break;
        case 'ej-geofeature-event':
          map.setView(new L.LatLng(30.004, -90.414), 14);
          break;
        case 'suburb-geofeature-event':
          map.setView(new L.LatLng(30.088, -90.446), 14);
          break;
        case 'parishline-geofeature-event':
          map.setView(new L.LatLng(30.032, -90.279), 14);
          break;
      }
    });

        /*///////////////////////////////////////*/
       /*//////////////HURRICANE////////////////*/
      /*///////////////////////////////////////*/

  var hurricaneVideo = document.getElementById("hurricane-video");


  hurricaneVideo.addEventListener("timeupdate", function () {
          //  Current time  
          var vTime = hurricaneVideo.currentTime;
          if (vTime < 5){
            //populateHurricanePanelRight(1, 'static_v1', ' ');
            //populateHurricanePanelRight(2, 'shell_at_the_tracks_v1', 'Shell Oil Refinery');
          }else if (vTime > 7.7 && vTime < 9.7){
            map.setView(new L.LatLng(30.001, -90.405), 16);
            //$rightPanelOne.css('display','none');
            //$rightPanelTwo.css('display','block');
            //populateHurricanePanelRight(1,'I-10_traffic_v1', 'Bonnet Carre Spillway @ I10');
          }else if (vTime > 26 && vTime < 29){
            //$rightPanelOne.css('display','block');
            //$rightPanelTwo.css('display','none');
            //populateHurricanePanelRight(2,'dad_on_roof_v1', 'Norco during the approach of Hurricane Isaac');
            map.setView(new L.LatLng(30.063, -90.383), 15);
          }else if (vTime > 47 && vTime < 51){
            //$rightPanelTwo.fadeIn('slow');
            //$rightPanelOne.css('display','none');
            //populateHurricanePanelImageRight(1, '<img src="i/property_loss_grows_with_reports_v1.png" height="100%" style="padding-top:10px;">', 'Baton Rouge State Times Advocate, October 2, 1915');
            map.setView(new L.LatLng(30.005, -90.412), 15);
          }else if (vTime > 70 && vTime < 73){
            //hurricaneLayer.show();
            //$rightPanelOne.fadeIn('slow');
            //$rightPanelTwo.css('display','none');
            //populateHurricanePanelImageRight(2, '<img src="i/heroic_efforts_fail_v1.png" width="100%" style="padding:60px 10px 0 10px;">', 'Baton Rouge State Times Advocate, October 3, 1915');
            //map.centerAndZoom([-90.412, 30.005 ], 6);
          }else if (vTime > 90.7 && vTime < 93.7){
            //$rightPanelTwo.css('display','block');
            //$rightPanelOne.css('display','none');
            //map.centerAndZoom([-90.4268, 30.1077 ], 15);
            //populateHurricanePanelRight(1, 'hurricane_isaac_course_v1', 'Hurricane Isaac (above) closely followed the course of the West Indian Hurricane of 1915 (map display)');
          }else if (vTime > 106 && vTime < 108){
            //$rightPanelOne.css('display','block');
            //$rightPanelTwo.css('display','none');
           // map.centerAndZoom([-90.412, 30.005 ], 8);
            //populateHurricanePanelRight(2, 'burning_cane_v1', ' ');
          }else if (vTime > 106 && vTime < 108){
            //$rightPanelTwo.css('display','block');
            //$rightPanelOne.css('display','none');
          }
        }, false);

  
      /*/////////////////////////////////////*/
     /*//////////////LABRANCHE//////////////*/
    /*/////////////////////////////////////*/

      var labrancheIndustrialPark = '<div style="float:left"><img src="i/walker_land_company_name_inverted_v1.png" style="padding: 0 25px 15px 0; max-width:370px; width:100%"></div>The Walker Land Company began selling parcels in this development in the early 1970s. Soon the company was under investigation by the U.S. Secretary of Housing and Urban Development (HUD) for failing to address certain "particulars" of the development before selling the properties, such as:<br><br><ul><li>Failing to disclose in the property report to HUD that a "marina, boat-town, golf course, tennis courts, motel, and regional shopping center" would be constructed, as promised in advertising.</li><li>Failing to address who would be responsible for draining lots below sea level (ie, would it be the responsibility of the purchaser to foot the bill?).</li><li>Failing to address how access to all lots would be achieved since there were\'t any streets or roads.</li></ul>';

      function labranche(){
        labrancheDevelopments.addTo(map);

        labrancheDevelopments.on("click", function(e){
          console.log(e);
          if (e.layer.feature.properties['name'] == "LaBranche Industrial Park"){
            executeDevelopmentEvent('.labranche', 0, labrancheIndustrialPark);
          }
          labrancheDevelopments.setStyle({color: "#960000",
              fillColor: "#642800",
              fillOpacity: 0.4,
              weight: 1})
          e.layer.setStyle({
            'fillColor':'rgb(130,150,0)',
            'color':'rgb(200,200,0)'
          });
          map.setView(new L.LatLng(e.latlng['lat'],e.latlng['lng']),14);
        })
      }


      function executeDevelopmentEvent(selector, id, context){
        //resetSymbols();
        //graphics[id].setSymbol(selected);
        $('.geometry-link').css('text-decoration','none');
        $(selector).css('text-decoration','underline');
        //var extent = new Extent(extents[id]);
        //map.setExtent(extent);
        $('#labranche-context').html(context);
      };

      /*$('#mobile-labranche-dev-menu').on("click", 
      "a[role='menuitem']", function( event ) {
        if ($(event.target).hasClass('labranche')){
          executeDevelopmentEvent('.labranche', 0, labrancheIndustrialPark);
        }else if($(event.target).hasClass('westlake')){
          executeDevelopmentEvent('.westlake', 1, 'Testing testing');
        }else if($(event.target).hasClass('cloverleaf')){
          executeDevelopmentEvent('.cloverleaf', 2);
        }else if($(event.target).hasClass('beltway')){
          executeDevelopmentEvent('.beltway', 3);
        }else if($(event.target).hasClass('shining')){
          executeDevelopmentEvent('.shining', 4);
        }else if($(event.target).hasClass('james')){
          executeDevelopmentEvent('.james', 5);
        }else if($(event.target).hasClass('monte')){
          executeDevelopmentEvent('.monte', 6);
        }else if($(event.target).hasClass('lakeland')){
          executeDevelopmentEvent('.lakeland', 7);
        }
      });*/

        /*///////////////////////////////////////*/
       /******************NORCO******************/
      /*///////////////////////////////////////*/


      function norco(){

        plantationsLayer.addTo(map);

        $opacityBar = $('#opacity-bar');
        $norcoLandUsePane = $('#norcoLandusePane');
        
        $opacityBar.on("input", function() {
            opacityValue = $(this).val();
            plantationsLayer.setOpacity(opacityValue);
          });

        $norcoLandUsePane.on("click",  "a[href^='#']", function(event){
          console.log('norco clicked');
          if ($(event.target).hasClass('plantation')){
            hideAllLayers();
            plantationLayer.show();
            map.centerAndZoom([-90.4108, 30.0039], 11);
          }else if ($(event.target).hasClass('levee-domination')){
            hideAllLayers();
            map.centerAndZoom([-90.405, 30.001], 14);
            landuse.show();
          }else if ($(event.target).hasClass('ex-town')){
            hideAllLayers();
            map.centerAndZoom([-90.415, 30.001], 15);
            shellProperties.show();
          }else if ($(event.target).hasClass('land-use-switch')){
            floodLanduse.show();
            landuse.hide();
          }
        });


      }//End Norco

     /***************************/
    /*****MODULE ACTIVATION*****/ 
   /***************************/

  function activateModule(args){
    /*args: 'module', 'title', 'coordinates', 'zoom'*/
    window.scrollTo(0, 0);
    map.setView(new L.LatLng(args['lat'],args['long']), args['zoom']);
    //hideAllLayers();
    $('#'+args['module']+'-location-button').css('background-color','rgb(72, 131, 117)');
    eval(args['module'] + '()');
  };

  //HEADER MENU
  $( ".main-menu" ).on( "click", "a[href^='#']", function(event) {
    L.esri.basemapLayer('ImageryLabels').addTo(map);

    if ($(event.target).hasClass('hurricane')){
      activateModule({'module': 'hurricane',
        'title':'hurricane',
        'lat':30.0039, 
        'long':-90.4108,  
        'zoom':13
      });
    }else if ($(event.target).hasClass('labranche-location-button')){
      activateModule({'module': 'labranche',
        'title':'LABRANCHE WETLANDS',
        'lat':30.015,
        'long': -90.335, 
        'zoom':13
      });
    }else if ($(event.target).hasClass('norco-location-button')){ 
      activateModule({'module':'norco',
        'title':'NORCO INDUSTRIAL GROWTH',
        'lat':30.0039, 
        'long':-90.4108, 
        'zoom':12
      });
    }else if ($(event.target).hasClass('home-location-button')){ 
      activateModule({'module':'home',
        'title':'LOUISIANA\'S GERMAN COAST',
        'lat': 30.0339, 
        'long':-90.4008, 
        'zoom':11
      });
    }
  });

  </script>

</body>
</html>