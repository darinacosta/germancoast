/**
 * @license RequireJS text 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

define("map",["leaflet","esriLeaflet","minimap"],function(e,t,n){var r=e.map("map",{zoomControl:!1,touchZoom:!1,scrollWheelZoom:!1}).setView([30.0339,-90.4008],11),i=e.esri.basemapLayer("Imagery",{attribution:'<a class="video-link" href="./bibliography.html">Bibliography & Attribution</a> | Contact'}),s=new e.esri.BasemapLayer("ImageryLabels"),o=new e.esri.basemapLayer("Imagery",{attribution:"Basemap: ESRI"}),u=(new e.Control.MiniMap(o,{toggleDisplay:!0,zoomLevelOffset:-4,position:"bottomright"})).addTo(r),a=e.control.zoom({position:"topright"});return layerControl=e.control.layers(null,{Labels:s}),conigureMap=function(){r.tap&&r.tap.disable(),i.addTo(r),a.addTo(r),layerControl.addTo(r),r.on("click",function(e){console.log(e.latlng)})}(),{map:r,layerControl:layerControl,imageryLabels:s}}),define("controllers/layerStateControl",["jquery","leaflet","omnivore","esriLeaflet","map"],function(e,t,n,r,i){var s={},o=!1,u=!1,a=!1,f=function(e,r){e&&!o&&(o=!0,require(["layers/norco_landuses_general_v1","layers/norcolanduses_100YRFLOODPLAINDISSOLVE_v1","layers/norcoBoundary_v1","layers/industrialFacilities"],function(e,i,o,u){console.log("development layers initialized"),s.norcoLandUse=new t.geoJson(e,{style:function(e){return{fillColor:e.properties.color_qgis2leaf,color:"#000",weight:1,opacity:.5,fillOpacity:.6}}}),s.floodLandUse=new t.geoJson(i,{style:function(e){return{fillColor:e.properties.color_qgis2leaf,color:"#000",weight:1,opacity:.5,fillOpacity:.6}}}),s.norcoBoundary=new t.geoJson(o,{style:function(e){return{fillColor:e.properties.color_qgis2leaf,color:"yellow",weight:2,opacity:.8,fillOpacity:.2}}}),s.shellProperties=n.kml("./assets/layers/shell_properties_v1.kml").on("ready",function(){this.setStyle({color:"#960000",fillColor:"#642800",fillOpacity:.6,weight:1})}),s.industrialFacilities=new t.geoJson(u,{onEachFeature:function(e,t){var n="<b>"+e.properties.FACILITY+"</b>";t.bindPopup(n)},style:function(e){return{color:"#960000",fillColor:"#642800",fillOpacity:.4,weight:1}}}),r()}))},l=function(e,n){e&&!u&&(u=!0,require(["geoeyewitness"],function(e){s.eyewitness=t.geoJson(e,{pointToLayer:function(e,n){return t.circleMarker(n,{radius:8,color:"#000000",weight:1,opacity:1,fillOpacity:.8})},style:function(e){switch(e.properties.category){case"Flare":return{fillColor:"#E41515"};case"Odor":return{fillColor:"#25D276"};case"Leak":return{fillColor:"#FFFF66"};case"Dust":return{fillColor:"#B5B591"};default:return{fillColor:"#2E8AE6"}}},onEachFeature:function(e,t){t.bindPopup("<h4>"+e.properties.title.toUpperCase()+"</h4>"+e.properties.pubDate+"<br>"+'<br>"'+e.properties.description+'"</br>'+'<br>View the complete incident report at:<br><a class="geometry-link" target="_blank" href="'+e.properties.link+'">'+e.properties.link+"</a></br>")}}),n()}))},c=function(e,n){e&&!a&&(a=!0,require(["layers/airlineLevee","layers/labrancheDevelopmentsV1"],function(e,r){console.log("speculation layers initialized"),s.airlineLevee=new t.geoJson(e,{color:"yellow",weight:2,opacity:.8,fillOpacity:.2}),s.labrancheDevelopments=new t.geoJson(r,{onEachFeature:function(e,t){var n="<table><tr><h3>"+e.properties.NAME+'</h3></tr><tr><th scope="row">ACRES:</th><td style="padding:5px;">'+e.properties.ACREAGE+"</td></tr></table>";t.bindPopup(n)},style:function(e){return{color:"#960000",fillColor:"#642800",fillOpacity:.4,weight:1}}}),n()}))};return s.plantationsLayer=function(){return this.url="http://verylongroad.com/gis/services/plantation_test_v1.jpg",this.bounds=[[29.70323,-91.45075,29.70323],[30.46062,-89.96876]],new t.imageOverlay(this.url,this.bounds,{opacity:1})}(),s.frenierTitleLayer=function(){return this.url="./assets/i/FRENIER.png",this.bounds=[[30.108305899054287,-90.42065620422363],[30.10941964729591,-90.41722297668457]],new t.imageOverlay(this.url,this.bounds)}(),s.westIndianPath=t.polyline([],{color:"red",dashArray:[3,10]}),s.hurricaneLayer=n.kml("./assets/layers/west_indian_hurricane_v1.kml"),{layers:s,initializeDevelopmentLayers:f,initializeEyewitnessLayers:l,initializeSpeculationLayers:c}}),define("helpers/layerHelpers",["jquery","map","controllers/layerStateControl"],function(e,t,n){var r=t.layerControl,t=t.map,i=[],s,o=[],u=function(){e.each(n.layers,function(e,r){t.removeLayer(n.layers[e])})},a=function(){e.each(r._layers,function(e,t){i.push(r._layers[e].name)})},f=function(t){a(),e.each(t,function(t,n){e.inArray(t,i)!==!1&&r.addOverlay(n,t)})},l=function(n){function c(e){var n=e.layer,o=[e.latlng.lat,e.latlng.lng];r.setStyle({color:u,fillColor:a}),n.setStyle({fillColor:s,color:i}),t.setView(o,f)}var r=n.targetLayer,i=n.selectedColor,s=n.selectedFill,u=n.originalColor,a=n.originalFill,f=n.zoom!=="undefined"?n.zoom:13,l=function(){return e.inArray(r,o)===-1?(o.push(r),!1):!0}();r.setStyle({color:u,fillColor:a}),l===!1&&(r.on("click",c),console.log("Target layer initialized"))};return{hideAllLayers:u,selectPolyOnClick:l,populateLayerControl:f}}),define("helpers/videoHelpers",["leaflet"],function(e){return videoUpdateHandler=function(e,t){this.handler=e,this.time=t},runAtTime=function(e,t){var n=function(){if(this.currentTime>=t)return $(this).off("timeupdate",n),e.apply(this,arguments)};return n},returnVideoString=function(e){var t='<video muted style="width:100%;" autoplay="autoplay" loop=""><source src="https://s3-us-west-2.amazonaws.com/darinacostamediafiles/video/'+e+'.webm" type="video/webm"><source src="https://s3-us-west-2.amazonaws.com/darinacostamediafiles/video/'+e+'.ogv" type="video/ogg">Your browser does not support the video tag.</video>';return t},videoEventPopup=e.popup({maxHeight:200,minWidth:250,closeOnClick:!1}),{videoUpdateHandler:videoUpdateHandler,runAtTime:runAtTime,returnVideoString:returnVideoString,videoEventPopup:videoEventPopup}}),define("controllers/stateControl",["jquery","map","helpers/layerHelpers","helpers/videoHelpers"],function(e,t,n,r){var i=t.layerControl,t=t.map,s=e("#map-tab-content-dynamic"),o=e("#map .leaflet-top.leaflet-right").not(".leaflet-control-minimap .leaflet-top.leaflet-right"),u=e("#map-home-button"),a=e("#map-legend"),f={lat:t.getCenter().lat,lng:t.getCenter().lng,zoom:t.getZoom()},l=function(){$hurricaneContent=e("#hurricane.live-content");var t=$hurricaneContent.css("display");t==="block"&&$hurricaneContent.css("display","none")},c=function(t){t!==!1&&e.each(i._layers,function(e,t){i._layers[e].name!=="Labels"&&i.removeLayer(i._layers[e].layer)})},h=function(e){var r=e.lat,i=e.lng,s=e.zoom;t.setView(new L.LatLng(r,i),s),n.hideAllLayers()},p=function(i){var s=i.lat,o=i.lng,h=i.zoom,p=i.clearLayerControl,d=f.lat===s&&f.lng===o&&f.zoom===h;l(),c(p),a.html(""),a.css("display","none"),t.doubleClickZoom.enable(),n.hideAllLayers(),r.videoEventPopup._close(),e(".map-tab-content").scrollTop(0),t.setView(new L.LatLng(s,o),h),u.unbind(),u.on("click",function(){d===!1&&t.setView(new L.LatLng(s,o),h)})};return{defaultState:p,zoomAndHideLayers:h,$mapTab:s,$mainMapTopRight:o,$mapLegend:a}}),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.12",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("ï»¿")===0&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!assets/html/home.html",[],function(){return'<div id="home" class="tab-pane active scrollflip-content">\r\n  <div class="vignette-header">\r\n    <h1>The German Coast</h1>\r\n    <h2>Geographies of Southwestern Lake Pontchartrain & Beyond</h2>\r\n  </div>\r\n  <hr>\r\n     <p>\r\n       <span style="font-size:22px">T</span>he southwestern rim of Louisiana\'s Lake Pontchartrain is a complex mosaic of denuded swamplands, oil infrastructure, and highway sprawl. \r\n       This page hosts a series of interrelated multi-media vignettes that provide a tour of the region and emphasize its unique \r\n       geographic features. Please begin by observing a few of the broader characteristics of the River Parish landscape, such as  \r\n       the <a class="geometry-link" id="parishline-geofeature-event">stark divide between swamp and suburb</a> along the St. Charles/Jefferson parish line;\r\n       <a class="geometry-link" id="erosion-geofeature-event">saltwater erosion</a> along the shores of the lake; \r\n       <a class="geometry-link" id="ej-geofeature-event">residential areas sandwiched between refineries</a>; others that extend\r\n       into <a class="geometry-link" id="suburb-geofeature-event">precarious floodplains</a>;\r\n       and the telltale <a class="geometry-link" id="radial-geofeature-event">radial canals</a> of cypress logging.\r\n     <p>\r\n     <div id="development-section">\r\n          <h2 id="dev-notes">Development Notes</h2>\r\n          <p>This application is a work in progress, and is best viewed in <a class="geometry-link" href="http://www.google.com/chrome/" target="_blank">Google Chrome</a> or <a class="geometry-link" href="https://www.mozilla.org/en-US/firefox/new/" target="_blank">Firefox</a>. Support for mobile devices is limited, but improvements are coming soon. Not all vignettes are available, and those that are may not be complete. Refer to the "Updates" section for production notes, and check back regularly, as we\'re adding new features and content all the time.</p>\r\n          <h3>Questions or feedback?</h3> \r\n          <p>Contact us at <a class="geometry-link" href="mailto:airlinehighwayproject@gmail.com">airlinehighwayproject@gmail.com</a>.</p>\r\n          <h3>Updates</h3>\r\n          <div id=\'production-log\' style="max-height:75px; overflow-y:scroll;margin-bottom:20px;"></div>\r\n     </div>\r\n</div>'}),define("controllers/productionLog",["jquery"],function(e){var t="",n=[{date:"1.06.2015",update:"Layer toggle added."},{date:"1.05.2015",update:"Plantation vignette added."},{date:"1.03.2015",update:"Map events for Hurricane vignette synced up to 1:30."},{date:"11.20.2014",update:"New full-screen layout implemented."}],r=function(){for(var e=0;e<n.length;e++)t=t+n[e].date+": "+"<i>"+n[e].update+"</i><br>"}(),i=function(){e("#production-log").html(t)};return{init:i}}),define("vignettes/home",["jquery","map","controllers/layerStateControl","helpers/layerHelpers","controllers/stateControl","helpers/videoHelpers","text!assets/html/home.html","controllers/productionLog"],function(e,t,n,r,i,s,o,u){var t=t.map,a=i.$mapTab,f=s.returnVideoString,l=s.videoEventPopup,c=function(){e(".map-tab-content").on("click","#home",function(e){e.target.id==="radial-geofeature-event"?t.setView([30.269,-90.377],15):e.target.id==="erosion-geofeature-event"?t.setView([30.046,-90.33],14):e.target.id==="ej-geofeature-event"?(t.setView([30.004,-90.414],14),l.setLatLng([30.001,-90.409]),l.openOn(t),l.setContent(f("norco_flaring_v1"))):e.target.id==="suburb-geofeature-event"?t.setView([30.088,-90.446],14):e.target.id==="parishline-geofeature-event"&&t.setView([30.032,-90.279],14)})}(),h=function(){a.html(o),u.init(),i.defaultState({lat:30.0339,lng:-90.4008,zoom:11})};return{init:h}}),define("helpers/imageHelpers",["jquery"],function(e){return preload=function(t){e(t).each(function(){(new Image).src=this})},{preload:preload}}),define("controllers/contentToggleControl",["jquery"],function(e){var t=e(".map-tab-content"),n=e(".live-content"),r=e("#content-toggle"),i=function(){e("#content-toggle").on("click",function(){t.css("width")==="260px"?(t.addClass("sidebar-collapsed"),n.addClass("content-hidden"),r.css("left","9px"),console.log(e(".map-tab-content").css("width"))):e(".map-tab-content").css("width")==="30px"&&(t.removeClass("sidebar-collapsed"),window.location.hash==="#hurricane"?n.removeClass("content-hidden"):n.not(".map-tab-content-static").removeClass("content-hidden"),r.css("left","239px"))})}()}),define("controllers/persistenceControl",["jquery","bootstrap"],function(e){return init=function(){var t=window.location.hash;e('.main-menu a[href="'+t+'"]').trigger("click"),e(document).on("click",".main-menu",function(e){console.log(e),e.target.className=="home-location-button newpage"?window.location.hash="":window.location.hash=e.target.hash})},{init:init}}),define("text!assets/html/hurricane.html",[],function(){return'<!--*******************************************-->\r\n<!--***************HURRICANE*******************-->\r\n<!--*******************************************-->\r\n\r\n<div id="hurricane" class="tab-pane scrollflip-content">\r\n  <div id="hurricane-video-wrapper">\r\n    <div id="hurricane-video-inner-wrapper">\r\n      <video controls id="hurricane-video" style="width:99%;box-shadow: 6px 7px 8px rgba(13, 15, 13, 0.7)" preload="auto">\r\n        <source src="https://s3-us-west-2.amazonaws.com/darinacostamediafiles/video/donald_interview_v1.ogv" type="video/ogg">\r\n        <source src="https://s3-us-west-2.amazonaws.com/darinacostamediafiles/video/donald_interview_v1.webm" type="video/webm">\r\n        <source src="https://s3-us-west-2.amazonaws.com/darinacostamediafiles/video/donald_interview_v1.mp4" type="video/mp4">\r\n        Your browser does not support the video tag.\r\n      </video>\r\n    </div>\r\n    <div id="hurricane-video-control">\r\n      <div style="float: left;">\r\n        <span id="hurricane-play"><span class="glyphicon glyphicon-play pointer"></span></span> \r\n        <span id="hurricane-replay" class="glyphicon glyphicon-repeat pointer"></span></div>  <div style="float: right;">\r\n        <input type="range" id="hurricane-volume-bar" min="0" max="1" step="0.1" value="1" style="float: right;">\r\n      </div>\r\n    </div>\r\n    <div id="hurricane-context-visual"></div>\r\n    <div id="hurricane-context-text"></div>\r\n    <div class="col-md-12" id="viewport-too-small">\r\n      Some of this module\'s features have been disabled due to your screen size. For complete functionality, visit the German Coast in a larger viewport.\r\n    </div>\r\n  </div>\r\n</div>'}),define("helpers/pathAnimator",["map"],function(e){var e=e.map,t=function(t,n,r){function f(){a<points.length-1&&(t.addLatLng(points[a]),a<29?e.setView(points[a],r):e.setView(new L.LatLng(30.001,-90.405),7),++a,window.setTimeout(f,100))}t.setLatLngs([]),t.addTo(e),points=[];for(var i in n._layers){var s=n._layers[i]._latlngs[0],o=s.lat,u=s.lng;points.push([o,u])}var a=0;f()};return{drawPath:t}}),define("vignettes/hurricane",["jquery","map","controllers/layerStateControl","controllers/stateControl","text!assets/html/hurricane.html","helpers/layerHelpers","helpers/videoHelpers","helpers/pathAnimator"],function(e,t,n,r,i,s,o,u){var t=t.map,a=n.layers,f=r.$mapTab,l=e("#hurricane-video"),c=o.videoUpdateHandler,h=o.returnVideoString,p=o.videoEventPopup,d=o.runAtTime,v=e("#hurricane-context-visual"),m=e("hurricane-context-text"),g=r.$mainMapTopRight,y=function(){a.westIndianPath.addTo(t),u.drawPath(a.westIndianPath,a.hurricaneLayer,5)},b=[videoSec0_0=new c(function(){},5),videoSec1_0=new c(function(){t.setView(new L.LatLng(30.001,-90.409),16),p.setLatLng([30.001,-90.405]),p.setContent(h("shell_at_the_tracks_v1"))},8),videoSec1_1=new c(function(){p.openOn(t)},10),videoSec2_0=new c(function(){t.setView(new L.LatLng(30.063,-90.386),15),p.setLatLng([30.063,-90.383]),p.setContent(h("I-10_traffic_v1"))},27),videoSec3_0=new c(function(){t.setView(new L.LatLng(30.005,-90.419),15),p.setLatLng([30.005,-90.412]),p.setContent(h("dad_on_roof_v1"))},48),videoSec4_0=new c(function(){p._close(),y()},71),videoSec5_0=new c(function(){console.log("hurricane top right")},79),videoSec5_1=new c(function(){t.setView(new L.LatLng(30.1077,-90.4268),15),v.html('<img src="./assets/i/heroic_efforts_fail_v1.png" width="100%" style="padding:60px 10px 0 10px;"><br><i>Baton Rouge State Times Advocate, October 3, 1915</span></i>'),a.frenierTitleLayer.addTo(t)},91),videoSec6_0=new c(function(){},107)],w=function(){console.log(l),e("#hurricane-video").on("timeupdate",d(b[0].handler,b[0].time)),l.on("timeupdate",d(b[1].handler,b[1].time)),l.on("timeupdate",d(b[2].handler,b[2].time)),l.on("timeupdate",d(b[3].handler,b[3].time)),l.on("timeupdate",d(b[4].handler,b[4].time)),l.on("timeupdate",d(b[5].handler,b[5].time)),l.on("timeupdate",d(b[6].handler,b[6].time)),l.on("timeupdate",d(b[7].handler,b[7].time)),l.on("timeupdate",d(b[8].handler,b[8].time))},E=function(){r.defaultState({lat:30.0039,lng:-90.4108,zoom:12}),e("#map-tab-content-dynamic").html(""),e("#hurricane.live-content").css("display","block"),w()};return{init:E,$hurricaneContextVisual:v,$hurricaneContextText:m}}),define("controllers/hurricaneVideoControl",["jquery","vignettes/hurricane"],function(e,t){var n=e("#hurricane-video").get(0),r=e("#hurricane-play"),i=t.$hurricaneContextVisual,s="paused",o=document.getElementById("hurricane-volume-bar"),u='<span class="glyphicon glyphicon-play"></span>',a='<span class="glyphicon glyphicon-pause"></span>',f={play:function(){n.play(),s="playing",r.html(a)},pause:function(){r.html(u),n.pause(),s="paused"},replay:function(){i.html(""),n.currentTime="0",t.init(),this.play()}},l=function(){e("a.newpage").on("click",function(){f.pause()}),e("#hurricane-video, #hurricane-play").on("click",function(){s==="paused"?f.play():s==="playing"&&f.pause()}),e("#hurricane-replay").on("click",function(){f.replay()}),o.addEventListener("change",function(){n.volume=o.value},!1)}()}),define("text!assets/html/speculation.html",[],function(){return'<!--*******************************************-->\r\n<!--***************LABRANCHE*******************-->\r\n<!--*******************************************-->\r\n\r\n<div id="speculation" class="tab-pane scrollflip-content">\r\n\r\n\r\n  <div id="labranche-context">\r\n    <div class="vignette-header">\r\n      <h1>Real Estate Speculation</h1>\r\n      <h2>in the LaBranche Wetlands</h2>\r\n    </div>\r\n    <hr>\r\n    <p>In the 1970s, as residential demand in St. Charles Parish increased, private real estate developers began purchasing tracts of land deep in the LaBranche Wetlands. Many investors in the area believed that the Army Corps of Engineers would build a hurricane protection levee along the shore of Lake Pontchartrain, thus making their properties eligible for federally subsidized flood insurance.</p>\r\n    <div id="walker-land-company">\r\n      <img style="text-align:center;" src="./assets/i/walker_land_company_name_inverted_v1.png" style="padding:5px; max-width:365px; width:100%">\r\n      <p>During this period, the Walker Land Company sold many parcels in the <a class="geometry-link labranche-industrial-park">LaBranche Industrial Park</a>. Soon the company was under investigatizon by the U.S. Secretary of Housing and Urban Development (HUD) for failing to address certain "particulars" of the development before selling the properties, such as:\r\n        <ul>\r\n          <li>Failing to disclose in the property report to HUD that a "marina, boat-town, golf course, tennis courts, motel, and regional shopping center" would be constructed, as promised in advertising.</li>\r\n          <li>Failing to address who would be responsible for draining lots below sea level (ie, would it be the responsibility of the purchaser to foot the bill?).</li><li>Failing to address how access to all lots would be achieved since there weren\'t any streets or roads.</li>\r\n        </ul>\r\n      </p>\r\n    <p>Ultimately, wetland preservation policies forced the Army Corps to <a class="geometry-link airline-levee">reroute the levee</a>, which now runs roughly parallel to Airline Highway and less than a quarter of a mile to its north. This has made development of the wetlands financially infeasible. Individuals who bought parcels from the Walker Land Company and other developers now own parcels that are submerged beneath as much as 15 feet of water. \r\n    </div>\r\n  </div>\r\n</div>'}),define("vignettes/labranche",["jquery","map","controllers/layerStateControl","controllers/stateControl","helpers/layerHelpers","text!assets/html/speculation.html"],function(e,t,n,r,i,s){var t=t.map,o=r.$mapTab,u=n.labrancheDevelopments,a=n.layers,f=new L.latLng(30.03759433988124,-90.37714004516602),l,c,h=function(e){c!=="initialized"?n.initializeSpeculationLayers(!0,function(){l={Levee:a.airlineLevee,"Speculative Developments":a.labrancheDevelopments},i.populateLayerControl(l),c="initialized",e()}):(i.populateLayerControl(l),e())},p=function(){if(a.labrancheDevelopments!==undefined){var n=a.labrancheDevelopments,r=a.airlineLevee,s={},o=function(){e.each(n._layers,function(e,t){s[t.feature.properties.NAME]=t})}(),u=function(){e(".map-tab-content").on("click","#speculation a",function(i){e(i.target).hasClass("labranche-industrial-park")?(n.addTo(t),s["LaBranche Industrial Park"].fireEvent("click",{latlng:f})):e(i.target).hasClass("airline-levee")&&(t.setView(new L.LatLng(29.98512,-90.3433),13),r.addTo(t))})}();i.selectPolyOnClick({targetLayer:n,selectedColor:"rgb(200,200,0)",selectedFill:"rgb(130,150,0)",originalColor:"#960000",originalFill:"#642800",zoom:14}),n.addTo(t)}},d=function(){r.defaultState({lat:30.015,lng:-90.335,zoom:13}),h(function(){p()}),o.html(s)};return{init:d}}),define("text!assets/html/domination.html",[],function(){return'<!--*******************************************-->\r\n<!--*****************NORCO*********************-->\r\n<!--*******************************************-->\r\n\r\n<div id="domination" class="tab-pane scrollflip-content">\r\n  <div class="vignette-header">\r\n    <h1>Levee Domination</h1>\r\n    <h2>& Other Spatial Influences of Industrialization</h2>\r\n  </div>\r\n  <hr>\r\n  <h2 style="text-align:center">Growth</h2>\r\n  <p>\r\n    <span style="font-size:22px">A</span>s petroleum companies moved into Louisiana, they sought land that was plentiful and cheap in order to construct refineries. The "River Parishes" between Baton Rouge and New Orleans along the Mississippi River were an ideal location. It hosted vast acres of idle land, a legacy of Louisiana\'s once-robust plantation economy. The river itself provided access to Gulf oil fields, and could serve as a coolant for machinery as well as a toxic waste sink. The land nearest to the river was also the most elevated and least flood-prone in the region due to many hundreds of years of sediment deposition by the Mississppi River, which built up natural levees along its banks.\r\n  </p>\r\n  <p>\r\n    Due to these siting benefits, <a class="industrial-facilities geometry-link">industrial facilities spread rapidly across the German Coast\'s riverfront</a> throughout the 20th century. The Mecican Petroleum Company initiated this trend in 1913 after purchasing the Destrehan Plantation. Royal Dutch Shell moved into the parish shortly after when it purchased the 366 acre Good Hope plantation tract. Over time the tract grew into a massive oil refinery that bought out and ultimately devoured what was once the small port town of <a class="geometry-link goodhope">Good Hope</a>.\r\n  </p>\r\n  <p><a href="./assets/i/good_hope_change_v1.jpg" class="image-link goodhope" title="This series of topographical maps documents the gradual disappearance of Good Hope, highlighted in red (USGS 1952, 1967, & 1992)."><img src="./assets/i/good_hope_change_v1.jpg" style="width:100%"></a></p>\r\n  <h2 style="text-align:center">Fencelines</h2>\r\n  <p>\r\n    <span style="font-size:22px">M</span>any former slaves settled the plantation land upon which they once labored following the Civil War, often occupying towns and villages directly along the riverfront. When the lower Mississippi became a site of rapid petro-industrial development, these freed slave communities became the unwitting neighbors of heavy industry. Such was the case for the village of Sellers, in the town now called <a class="geometry-link norco-boundary">NORCO</a>, an acronym for \'New Orleans Refining Company\'. Shell relocated Sellers residents into an area slightly downriver from their original settlement. This community became known as \'Diamond\'.\r\n  </p>\r\n  <p> <a class="land-use-switch geometry-link">Switch Test</a> \r\n</div>\r\n'}),define("vignettes/domination",["jquery","map","controllers/layerStateControl","controllers/stateControl","helpers/layerHelpers","helpers/imageHelpers","text!assets/html/domination.html","magnificent"],function(e,t,n,r,i,s,o){var u=t.layerControl,t=t.map,a=r.$mapTab,f=e("#growth"),l=e(".norco-growth"),c=e("#norco-growth-context"),h="full",p=n.layers,d="uninitialized",v,m=function(e){d==="uninitialized"?n.initializeDevelopmentLayers(!0,function(){v={"Norco Land Use":p.norcoLandUse,"Flood Land Use":p.floodLandUse,"Norco Boundary":p.norcoBoundary,"Industrial Facilities":p.industrialFacilities,"Shell Properties":p.shellProperties},i.populateLayerControl(v),d="initialized",e()}):(i.populateLayerControl(v),e())},g=function(){d==="initialized"&&i.selectPolyOnClick({targetLayer:p.industrialFacilities,selectedColor:"rgb(200,200,0)",selectedFill:"rgb(130,150,0)",originalColor:"#960000",originalFill:"#642800"})},y=e(".map-tab-content").on("click","#domination a",function(n){e(n.target).hasClass("levee-domination")?(r.zoomAndHideLayers({lat:30.001,lng:-90.405,zoom:14}),p.norcoLandUse.addTo(t)):e(n.target).hasClass("industrial-facilities")?(r.zoomAndHideLayers({lat:30.0039,lng:-90.4108,zoom:13}),p.industrialFacilities.addTo(t)):e(n.target).hasClass("goodhope")?r.zoomAndHideLayers({lat:29.992,lng:-90.4001,zoom:16}):e(n.target).hasClass("ex-town")?(r.zoomAndHideLayers({lat:30.004,lng:-90.418,zoom:16}),p.shellProperties.addTo(t)):e(n.target).hasClass("norco-boundary")?(r.zoomAndHideLayers({lat:30.001,lng:-90.42,zoom:14}),p.norcoBoundary.addTo(t)):e(n.target).hasClass("land-use-switch")&&(h=="full"?(p.floodLandUse.addTo(t),t.removeLayer(p.norcoLandUse),h="partial"):h=="partial"&&(p.norcoLandUse.addTo(t),t.removeLayer(p.floodLandUse),h="full"))}),b=function(){r.defaultState({lat:30.0039,lng:-90.4108,zoom:12}),m(function(){g()}),a.html(o),e(".map-tab-content .image-link").magnificPopup({type:"image"})};return{init:b}}),define("text!assets/html/eyewitness.html",[],function(){return'<div id="eyewitness" class="tab-pane scrollflip-content">\r\n  <div class="vignette-header">\r\n    <h1>Eyewitness Reporting</h1>\r\n    <h2>The Louisiana Bucket Brigade iWitness Pollution Map Project</h2>\r\n  </div>\r\n  <hr>\r\n  <h2 style="text-align:center"></h2>\r\n  <p>\r\n  </p>\r\n</div>\r\n'}),define("vignettes/eyewitness",["leaflet","jquery","map","controllers/layerStateControl","controllers/stateControl","helpers/layerHelpers","helpers/imageHelpers","text!assets/html/eyewitness.html"],function(e,t,n,r,i,s,o,u){var n=n.map,a=i.$mapTab,f=i.$mapLegend,l=r.layers,c="uninitialized",h=function(e){c==="uninitialized"?r.initializeEyewitnessLayers(!0,function(){moduleLayers={eyewitness:l.eyewitness},s.populateLayerControl(moduleLayers),c="initialized",e()}):(s.populateLayerControl(moduleLayers),e())},p=function(){c==="initialized"&&l.eyewitness.on("click",function(e){n.panTo(e.layer.getLatLng())}),c="configured"},d=function(){if(c==="initialized"||c==="configured"){var e={},n=l.eyewitness._layers;return t.each(n,function(r,i){var s=n[r].feature.properties.category,o=n[r].options.fillColor;t.inArray(s,["Flare","Odor","Leak","Dust"])!==-1&&(e[s]=o)}),e}},v=function(){var e=d(),n="<h5>Categories</h5>";t.each(e,function(e,t){n+="<div class='row'><div class='col-xs-1' style='width:15px; height:12px;border:1px solid black;background-color:"+t+"'></div><div class='col-xs-9'>"+e+"</div>"}),n+="<div class='row'><div class='col-xs-1' style='width:15px; height:12px;border:1px solid black;background-color:#2E8AE6'></div><div class='col-xs-9'>Other</div></div>",f.append(n).css("display","block")},m=function(){a.html(u),i.defaultState({lat:30.0039,lng:-90.4108,zoom:12}),h(function(){v(),l.eyewitness.addTo(n),p()})};return{init:m}}),define("text!assets/html/plantation-land.html",[],function(){return'<div id="plantation-land" class="tab-pane scrollflip-content">\r\n  <div class="vignette-header">\r\n  	<h1>Plantation Land</h1>\r\n    <a class="image-link legend" href="./assets/i/plantation_toc_v1.jpg"><h3 style="display:inline-block">Legend</h3> <img title="Map Legend" description="Map Legend" src="./assets/i/legend.png"></a>\r\n    <div style="padding: 15px 0;">\r\n      <input type="range" id="opacity-bar" min="0" max="1" step="0.1" value="1" style="max-width:375px;width:100%;margin:0 auto;cursor:pointer;">\r\n    </div>\r\n    <hr>\r\n  </div>\r\n  \r\n</div>'}),define("vignettes/plantationLand",["jquery","map","controllers/layerStateControl","controllers/stateControl","helpers/layerHelpers","helpers/imageHelpers","text!assets/html/plantation-land.html","magnificent"],function(e,t,n,r,i,s,o){var t=t.map,u=r.$mapTab,a=n.layers.plantationsLayer,f=e(".map-tab-content").on("input","#opacity-bar",function(){opacityValue=e(this).val(),a.setOpacity(opacityValue)}),l=function(){u.html(o),r.defaultState({lat:30.0039,lng:-90.4108,zoom:12}),t.doubleClickZoom.disable(),a.addTo(t),f,e(".map-tab-content .image-link").magnificPopup({type:"image"})};return{init:l}}),define("text!assets/html/menu.html",[],function(){return'<!--Navigation Menu Full Screen-->\r\n<ul class="nav nav-tabs main-menu hidden-xs main-menu" id="tabset" style="position:absolute;top: 0px;width: 100%;">\r\n  <li class="active">\r\n    <a data-toggle="tab" class="home-location-button newpage" href="#home"><span class="glyphicon glyphicon-home">\r\n      </span> GERMAN COAST\r\n    </a>\r\n  </li>\r\n  <li class="dropdown">\r\n    <a class="dropdown-toggle" data-toggle="dropdown" href="#">SWAMP & SUBURB <span class="caret"></span></a>\r\n    <ul class="dropdown-menu">\r\n      <li data-toggle="popover"\r\n      data-content="The cypress swamps and marsh prairies of the LaBranche Wetlands have so far survived the real-estate ventures that have consumed neighboring ecosystems."><a href="#speculation" data-toggle="tab" class="labranche-location-button newpage">Speculation</a></li>\r\n      <li data-toggle="popover" data-content="A story about a hurricane told through dynamic map events, animation, and film. Featuring an interview with long-time St. Charles Parish resident Donald Tregre, as well as footage from Hurricane Isaac."><a href="#hurricane" data-toggle="tab" class="hurricane-location-button newpage">Hurricane</a></li>\r\n      <li data-toggle="popover" data-content=""><a class="newpage inactive"><span>Crash</span></a></li>\r\n    </ul><!-- end of dropdown menu -->\r\n  </li>\r\n  <li class="dropdown">\r\n    <a class="dropdown-toggle" data-toggle="dropdown" href="#">INDUSTRY & DISASTER <span class="caret"></span></a>\r\n    <ul class="dropdown-menu">\r\n      <li><a href="#domination" data-toggle="tab" class="norco-location-button newpage">Domination</a></li>\r\n      <li><a href="#eyewitness" data-toggle="tab" class="eyewitness newpage">Eyewitness</a></li>\r\n      <li data-toggle="popover" data-content="An exploration of the Shell Oil Refinery explosion of 1988 featuring contemporary news footage and interviews with local residents."><a class="video-link newpage inactive">Explosion <span class="glyphicon glyphicon-film"></span></a></li>\r\n    </ul><!-- end of dropdown menu -->\r\n  </li>\r\n  <li class="dropdown">\r\n    <a class="dropdown-toggle" data-toggle="dropdown" href="#">SLAVERY & REVOLT <span class="caret"></span></a>\r\n    <ul class="dropdown-menu">\r\n      <li data-toggle="popover" data-content="Explore the pre-industrial plantation lands of the River Parishes."><a href="#plantation-land" data-toggle="tab" class="plantation-location-button newpage">Plantations</a></li>\r\n      <li><a class="inactive"><i>1811</i></a></li>\r\n      <li><a class="inactive"><i>Maroon</i></a></li>\r\n    </ul><!-- end of dropdown menu -->\r\n  </li>\r\n</ul>\r\n\r\n<!--Navigation Menu Mobile-->\r\n<ul class="nav nav-tabs hidden-xl hidden-lg hidden-md hidden-sm main-menu" id="tabset" style="position: absolute;top: 0px;width: 100%;">\r\n  <li class="active home-location-button newpage"><a href="#" class="home-location-button newpage" data-toggle="tab">The German Coast</span></a></li>\r\n  <li class="dropdown">\r\n    <a class="dropdown-toggle" data-toggle="dropdown" href="#">Module <span class="caret"></span></a>\r\n    <ul class="dropdown-menu">\r\n      <li data-toggle="popover"\r\n      data-content="The cypress swamps and marsh prairies of the LaBranche Wetlands have so far survived the real-estate ventures that have consumed neighboring ecosystems."><a href="#speculation" data-toggle="tab" class="labranche-location-button newpage">Speculation</a></li>\r\n      <li data-toggle="popover" data-content="A story about a hurricane told through dynamic map events, animation, and film. Featuring an interview with long-time St. Charles Parish resident Donald Tregre, as well as footage from Hurricane Isaac."><a href="#hurricane" data-toggle="tab" class="hurricane-location-button newpage">Hurricane</a></li>\r\n      <li data-toggle="popover" data-content=""><a class="newpage inactive"><span>Crash</span></a></li>\r\n      <li><a href="#domination" data-toggle="tab" class="norco-location-button newpage">Domination</a></li>\r\n      <li><a href="#eyewitness" data-toggle="tab" class="eyewitness newpage">Eyewitness</a></li>\r\n      <li data-toggle="popover"\r\n      data-content="An exploration of the Shell Oil Refinery explosion of 1988 featuring contemporary news footage and interviews with local residents."><a class="video-link newpage inactive">Explosion <span class="glyphicon glyphicon-film"></span></a></li>\r\n      <li data-toggle="popover" data-content="Explore the pre-industrial plantation lands of the River Parishes."><a href="#plantations" data-toggle="tab" class="plantation-location-button newpage">Plantations</a></li>\r\n      <li><a class="inactive"><i>1811</i></a></li>\r\n      <li><a class="inactive"><i>Maroon</i></a></li>\r\n    </ul><!-- end of dropdown menu -->\r\n  </li>\r\n</ul>\r\n<!--/Navigation-->'}),define("controllers/menuController",["jquery","map","vignettes/home","vignettes/labranche","vignettes/hurricane","vignettes/domination","vignettes/eyewitness","vignettes/plantationLand","leaflet","text!assets/html/menu.html","esriLeaflet","bootstrap"],function(e,t,n,r,i,s,o,u,a,f){var l=t.imageryLabels,t=t.map,c=e("#navigation-menu"),h=function(){c.find(".main-menu").on("click",function(e){l.addTo(t),e.target.className==="home-location-button newpage"||e.target.className===""?(t.removeLayer(l),n.init()):e.target.className==="labranche-location-button newpage"?r.init():e.target.className==="hurricane-location-button newpage"?i.init():e.target.className==="norco-location-button newpage"?s.init():e.target.className==="eyewitness newpage"?o.init():e.target.className==="plantation-location-button newpage"&&u.init()})},p=function(){e("#navigation-menu").html(f),h()}()}),require(["jquery","vignettes/home","helpers/imageHelpers","controllers/contentToggleControl","controllers/persistenceControl","controllers/hurricaneVideoControl","controllers/menuController","magnificent"],function(e,t,n,r,i){i.init(),window.location.hash==""&&t.init(),e(document).ready(function(){e("#load-screen").fadeOut("slow",function(){n.preload(["http://verylongroad.com/gis/services/plantation_test_v1.jpg"])}),e(".map-tab-content .image-link").magnificPopup({type:"image"}),e(".video-link").magnificPopup({type:"iframe"}),e('[data-toggle="popover"]').popover({trigger:"hover",placement:"bottom"})})}),define("index",function(){});